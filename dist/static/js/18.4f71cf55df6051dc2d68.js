webpackJsonp([18],{oOw3:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("Dd8w"),i=e.n(o),r=e("NYxO"),a=e("TrLn"),c=e("m8LM"),s=(e("VDWi"),{name:"",components:{FixedLayout:a.a,FileImage2:c.a},props:{},data:function(){return{myPreimg:[],myContent:""}},watch:{},computed:i()({},Object(r.c)({tagId:function(t){return t.write.post.tagId},clubId:function(t){return t.write.post.clubId},content:function(t){return t.write.post.content}})),created:function(){this.init()},mounted:function(){},methods:{init:function(){for(var t=0;t<3;t++)this.myPreimg.push({url:"",file:null})},initData:function(){},handLoadImg:function(t,n,e){var o=this;this.$commons.compressorImage(n).then(function(t){o.$commons.uploadImage(t).then(function(t){200===t.code&&(e.url=t.data)})})},handDeleteImage:function(t,n){t.file="",t.url=""},handNext:function(){var t=this;if(this.$store.commit(this.$actionType.set_post_data,{content:this.myContent,preimg:this.myPreimg}),this.content){var n,e={clubId:this.clubId,tagId:this.tagId,cont:this.myContent,preimg:(n="",t.myPreimg.forEach(function(t){return t.url&&(n+=t.url+"#")}),n)};this.$http.post(this.$port.POST_DISCUSS,this.$qs.stringify(e)).then(function(n){200!==n.code?alert("发帖失败"):t.$router.push({path:"/forumPage"})})}else alert("请输入内容")}}}),u={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticStyle:{background:"#fff"}},[e("mt-header",{attrs:{title:"发帖"}},[e("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[e("mt-button",{attrs:{icon:"back"},on:{click:function(n){t.$router.go(-1)}}})],1),t._v(" "),e("mt-button",{attrs:{slot:"right"},on:{click:t.handNext},slot:"right"},[t._v("发送")])],1),t._v(" "),e("mt-field",{attrs:{placeholder:"请输入帖子内容",type:"textarea",rows:"4"},model:{value:t.myContent,callback:function(n){t.myContent=n},expression:"myContent"}}),t._v(" "),e("section",{staticClass:"m-uploads"},[t._l(t.myPreimg,function(n,o){return[e("file-image2",{attrs:{src:n.url},on:{load:function(e,o){return t.handLoadImg(e,o,n)},delete:function(e){t.handDeleteImage(n,o)}}})]})],2)],1)},staticRenderFns:[]};var l=e("VU/8")(s,u,!1,function(t){e("wE2S"),e("wO/Q")},"data-v-12c9ee7b",null);n.default=l.exports},wE2S:function(t,n){},"wO/Q":function(t,n){}});
//# sourceMappingURL=18.4f71cf55df6051dc2d68.js.map