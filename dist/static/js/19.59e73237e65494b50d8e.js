webpackJsonp([19],{"+T1A":function(t,e){},"/Q8x":function(t,e){},NuEX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),l=a.n(i),n=a("Dd8w"),c=a.n(n),o=a("NYxO"),r=a("TrLn"),s=a("m8LM"),d={name:"coach",components:{FixedLayout:r.a,FileImage2:s.a},data:function(){return{city:"",phone:null,email:"",wxId:"",bankNo:"",institutionName:"",birth:new Date,lang:"",desc:"",headimg:{file:null,base64:"",url:""},mainimg:{file:null,base64:"",url:""},idcardF:{file:null,base64:"",url:""},idcardB:{file:null,base64:"",url:""},coachF:{file:null,base64:"",url:""},coachB:{file:null,base64:"",url:""},agree:!1}},computed:c()({},Object(o.c)({}),{formatBirth:function(){var t=this.birth.getFullYear(),e=this.birth.getMonth()+1,a=this.birth.getDate();return t+"-"+(e<10?0:"")+e+"-"+(a<10?0:"")+a}}),watch:{},created:function(){var t=this;new l.a(function(e,a){if(t.$route.query.coachId)t.$http.get(t.$port.AUTH_COACH,{params:{coachId:t.$route.query.coachId}}).then(function(a){200===a.code&&(t.city=a.data.city,t.phone=a.data.phone,t.email=a.data.email,t.wxId=a.data.wxId,t.bankNo=a.data.bankNo,t.institutionName=a.data.institutionName,t.birth=new Date(a.data.birth),t.lang=a.data.lang,t.desc=a.data.desc,t.headimg.url=a.data.headimg,t.mainimg.url=a.data.mainimg,t.idcardF.url=a.data.idcardF,t.idcardB.url=a.data.idcardB,t.coachF.url=a.data.coachF,t.coachB.url=a.data.coachB),e()});else{var i="coach_";t.city=localStorage.getItem(i+"city"),t.phone=localStorage.getItem(i+"phone"),t.email=localStorage.getItem(i+"email"),t.wxId=localStorage.getItem(i+"wxId"),t.bankNo=localStorage.getItem(i+"bankNo"),t.institutionName=localStorage.getItem(i+"institutionName"),t.lang=localStorage.getItem(i+"lang"),t.desc=localStorage.getItem(i+"desc"),e()}}).then(function(){var e="coach_";setInterval(function(){localStorage.setItem(e+"city",t.city||""),localStorage.setItem(e+"phone",t.phone||""),localStorage.setItem(e+"email",t.email||""),localStorage.setItem(e+"wxId",t.wxId||""),localStorage.setItem(e+"bankNo",t.bankNo||""),localStorage.setItem(e+"institutionName",t.institutionName||""),localStorage.setItem(e+"lang",t.lang||""),localStorage.setItem(e+"desc",t.desc||"")},1e3)})},methods:{handDeleteImage:function(t){t.file=null,t.base64="",t.url=""},uploadImg:function(t){var e=this;return new l.a(function(a,i){var l=new FormData;l.append("imgType",1),l.append("upload",t),e.$http.post(e.$port.UPLOAD_IMG,l).then(function(t){a(t)})})},handLoadImg:function(t,e,a){var i=this;console.log("handLoadImg",t,e,a),this[a].file=e,this[a].base64=t.currentTarget.result,this.uploadImg(e).then(function(t){200===t.code?i[a].url=t.data:alert(t.msg)})},handSubmit:function(){if(this.agree){var t={city:this.city,phone:this.phone,email:this.email,wxId:this.wxId,bankNo:this.bankNo,institutionName:this.institutionName,birth:this.formatBirth,lang:this.lang,headimg:this.headimg.url,mainimg:this.mainimg.url,idcardF:this.idcardF.url,idcardB:this.idcardB.url,coachF:this.coachF.url,coachB:this.coachB.url,desc:this.desc};this.$http.post(this.$port.AUTH_COACH,this.$qs.stringify(t)).then(function(t){t.code,alert(t.msg)})}else alert("同意服务协议才能提供服务")}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fixed-layout",[a("template",{slot:"header"},[a("mt-header",{attrs:{title:"教练认证"}},[a("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[a("mt-button",{attrs:{icon:"back"},on:{click:function(e){t.$router.go(-1)}}})],1)],1)],1),t._v(" "),a("mt-field",{staticClass:"right",attrs:{type:"tel",label:"联系方式",placeholder:"请填写正确的手机号码用于收取短信"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._v(" "),a("mt-field",{staticClass:"right",attrs:{type:"mail",label:"邮箱",placeholder:"请填写邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),a("mt-field",{staticClass:"right",attrs:{label:"所属城市",placeholder:"请输入所在城市"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),t._v(" "),a("mt-field",{staticClass:"right",attrs:{label:"微信号",placeholder:"请填写微信号"},model:{value:t.wxId,callback:function(e){t.wxId=e},expression:"wxId"}}),t._v(" "),a("mt-field",{staticClass:"right",attrs:{type:"number",label:"银行账号",placeholder:"请填写银行账号"},model:{value:t.bankNo,callback:function(e){t.bankNo=e},expression:"bankNo"}}),t._v(" "),a("mt-field",{staticClass:"right",attrs:{type:"text",label:"所属机构",placeholder:"请填写您所属的机构"},model:{value:t.institutionName,callback:function(e){t.institutionName=e},expression:"institutionName"}}),t._v(" "),a("mt-cell",{attrs:{title:"生日",value:t.formatBirth,"is-link":""},nativeOn:{click:function(e){t.$refs.pickerBirth.open()}}}),t._v(" "),a("mt-datetime-picker",{ref:"pickerBirth",attrs:{startDate:new Date("1900"),type:"date"},model:{value:t.birth,callback:function(e){t.birth=e},expression:"birth"}}),t._v(" "),a("mt-field",{staticClass:"right",attrs:{type:"text",label:"语言",placeholder:"请填写熟悉的语言"},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}}),t._v(" "),a("mt-cell",{attrs:{title:"上传头像"}}),t._v(" "),a("section",{staticClass:"m-uploads"},[a("ul",[a("li",[a("file-image2",{attrs:{src:t.headimg.url||t.headimg.base64},on:{load:function(e,a){return t.handLoadImg(e,a,"headimg")},delete:function(e){t.handDeleteImage(t.headimg)}}})],1)])]),t._v(" "),a("mt-cell",{attrs:{title:"个人主页图",value:"请上传横图"}}),t._v(" "),a("section",{staticClass:"m-uploads"},[a("ul",[a("li",[a("file-image2",{attrs:{src:t.mainimg.url||t.mainimg.base64},on:{load:function(e,a){return t.handLoadImg(e,a,"mainimg")},delete:function(e){t.handDeleteImage(t.mainimg)}}})],1)])]),t._v(" "),a("mt-cell",{attrs:{title:"个人简介"}}),t._v(" "),a("mt-field",{attrs:{type:"textarea",placeholder:"请简单介绍下自己，会有更多人对您感兴趣哦"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}}),t._v(" "),a("mt-cell",{attrs:{title:"上传认证材料",value:"请上传您的身份证正反面和教练证正反面"}}),t._v(" "),a("section",{staticClass:"m-uploads"},[a("ul",[a("li",[a("file-image2",{attrs:{src:t.idcardF.url||t.idcardF.base64},on:{load:function(e,a){return t.handLoadImg(e,a,"idcardF")},delete:function(e){t.handDeleteImage(t.idcardF)}}}),t._v(" "),a("h4",[t._v("身份证正面")])],1),t._v(" "),a("li",[a("file-image2",{attrs:{src:t.idcardB.url||t.idcardB.base64},on:{load:function(e,a){return t.handLoadImg(e,a,"idcardB")},delete:function(e){t.handDeleteImage(t.idcardB)}}}),t._v(" "),a("h4",[t._v("身份证反面")])],1),t._v(" "),a("li",[a("file-image2",{attrs:{src:t.coachF.url||t.coachF.base64},on:{load:function(e,a){return t.handLoadImg(e,a,"coachF")},delete:function(e){t.handDeleteImage(t.coachF)}}}),t._v(" "),a("h4",[t._v("教练证正面")])],1),t._v(" "),a("li",[a("file-image2",{attrs:{src:t.coachB.url||t.coachB.base64},on:{load:function(e,a){return t.handLoadImg(e,a,"coachB")},delete:function(e){t.handDeleteImage(t.coachB)}}}),t._v(" "),a("h4",[t._v("教练证反面")])],1)])]),t._v(" "),a("section",{staticClass:"ft"},[a("p",{staticClass:"agreement"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.agree,expression:"agree"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.agree)?t._i(t.agree,null)>-1:t.agree},on:{change:function(e){var a=t.agree,i=e.target,l=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.agree=a.concat([null])):n>-1&&(t.agree=a.slice(0,n).concat(a.slice(n+1)))}else t.agree=l}}}),a("a",{attrs:{href:""}},[t._v("同意《号角平台商户服务协议》")])]),t._v(" "),a("mt-button",{attrs:{type:"primary"},on:{click:t.handSubmit}},[t._v("确认")])],1)],2)},staticRenderFns:[]};var m=a("VU/8")(d,u,!1,function(t){a("/Q8x"),a("+T1A")},"data-v-2d125b05",null);e.default=m.exports}});
//# sourceMappingURL=19.59e73237e65494b50d8e.js.map