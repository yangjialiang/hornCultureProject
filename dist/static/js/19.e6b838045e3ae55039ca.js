webpackJsonp([19],{"9fgS":function(t,e){},PPpf:function(t,e){},oOw3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),i=n.n(o),a=n("Cz8s"),r=n("NYxO"),s=n("TrLn"),c=n("m8LM"),u=(n("VDWi"),{name:"",components:{FixedLayout:s.a,FileImage2:c.a,"v-Header":a.a},props:{},data:function(){return{myPreimg:[],myContent:""}},watch:{},computed:i()({},Object(r.d)({tagId:function(t){return t.write.post.tagId},clubId:function(t){return t.write.post.clubId},content:function(t){return t.write.post.content}})),created:function(){this.init()},mounted:function(){},methods:{init:function(){for(var t=0;t<3;t++)this.myPreimg.push({url:"",file:null})},initData:function(){},handLoadImg:function(t,e,n){var o=this;this.$commons.compressorImage(e).then(function(t){o.$commons.uploadImage(t).then(function(t){200===t.code&&(n.url=t.data)})})},handDeleteImage:function(t,e){t.file="",t.url=""},handNext:function(){var t=this;if(this.$store.commit(this.$actionType.set_post_data,{content:this.myContent,preimg:this.myPreimg}),this.content){var e,n={clubId:this.clubId,tagId:this.tagId,cont:this.myContent,preimg:(e="",t.myPreimg.forEach(function(t){return t.url&&(e+=t.url+"#")}),e)};this.$http.post(this.$port.POST_DISCUSS,this.$qs.stringify(n)).then(function(e){200!==e.code?alert("发帖失败"):t.$router.push({path:"/forumPage"})})}else alert("请输入内容")}}}),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticStyle:{background:"#fff"}},[n("v-Header",{staticClass:"head"},[n("span",{staticClass:"headText",attrs:{slot:"text"},slot:"text"},[t._v("发帖")]),t._v(" "),n("mt-button",{staticClass:"nextBtn",attrs:{slot:"right"},on:{click:t.handNext},slot:"right"},[t._v("发送")])],1),t._v(" "),n("mt-field",{attrs:{placeholder:"请输入帖子内容",type:"textarea",rows:"4"},model:{value:t.myContent,callback:function(e){t.myContent=e},expression:"myContent"}}),t._v(" "),n("section",{staticClass:"m-uploads"},[t._l(t.myPreimg,function(e,o){return[n("file-image2",{attrs:{src:e.url},on:{load:function(n,o){return t.handLoadImg(n,o,e)},delete:function(n){t.handDeleteImage(e,o)}}})]})],2)],1)},staticRenderFns:[]};var d=n("VU/8")(u,l,!1,function(t){n("9fgS"),n("PPpf")},"data-v-0077e6e9",null);e.default=d.exports}});
//# sourceMappingURL=19.e6b838045e3ae55039ca.js.map